import numpy as np
from sklearn.linear_model import LinearRegression


def line_of_best_fit(data):
    """
        Returns the line of best fit using
        the index and close of the dataframe.

        Params
        ---
        data: dataframe
    """

    X = np.array(data.index).reshape((-1, 1))
    y = np.array(data['close'].values).reshape((-1, 1))
    model = LinearRegression().fit(X, y)

    return model.predict(X)


#           time           open    high     low   close       volume
# 0  2020-05-15 00:00:00  203.29  204.08  202.62  202.98   7663.04388
# 1  2020-05-15 00:15:00  203.04  203.10  201.93  202.10  10013.43211
# 2  2020-05-15 00:30:00  202.05  203.15  201.98  202.57   4400.91125
# 3  2020-05-15 00:45:00  202.50  202.96  202.36  202.71   2879.45578
# 4  2020-05-15 01:00:00  202.71  202.79  202.33  202.75   5012.08427
# 5  2020-05-15 01:15:00  202.80  203.03  202.55  202.58   6795.15290
# 6  2020-05-15 01:30:00  202.58  202.59  201.86  202.32   5649.55150
# 7  2020-05-15 01:45:00  202.32  202.50  201.55  201.67   4096.69214
# 8  2020-05-15 02:00:00  201.67  201.83  199.92  200.91  25445.67041
# 9  2020-05-15 02:15:00  200.88  200.90  199.26  200.26  13347.01964
# 10 2020-05-15 02:30:00  200.22  200.22  197.21  199.32  39043.68004
# 11 2020-05-15 02:45:00  199.30  199.74  198.53  199.45   9229.00837
# 12 2020-05-15 03:00:00  199.44  200.65  198.78  200.48  13665.66505
# 13 2020-05-15 03:15:00  200.48  200.89  199.77  199.88  21840.03321
# 14 2020-05-15 03:30:00  199.81  200.27  199.46  200.25   8790.25870
# 15 2020-05-15 03:45:00  200.26  200.37  199.41  199.41   7498.73905
# 16 2020-05-15 04:00:00  199.42  199.68  198.77  199.38   7294.79096
# 17 2020-05-15 04:15:00  199.37  199.88  199.05  199.42   3602.30767
# 18 2020-05-15 04:30:00  199.37  200.10  199.29  199.75   3367.78656
# 19 2020-05-15 04:45:00  199.75  200.00  198.57  198.82   4635.93951


# Predicted
# [[202.96185714]
#  [202.73960902]
#  [202.5173609 ]
#  [202.29511278]
#  [202.07286466]
#  [201.85061654]
#  [201.62836842]
#  [201.4061203 ]
#  [201.18387218]
#  [200.96162406]
#  [200.73937594]
#  [200.51712782]
#  [200.2948797 ]
#  [200.07263158]
#  [199.85038346]
#  [199.62813534]
#  [199.40588722]
#  [199.1836391 ]
#  [198.96139098]
#  [198.73914286]]
